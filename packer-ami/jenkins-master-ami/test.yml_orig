---
- hosts: localhost
#- hosts: tag_jenkins_master
  tasks:
   - name: install pkg
     yum:
        name: java-1.8.0
        state: present

   - name: copying repo
     get_url:
        url: http://pkg.jenkins-ci.org/redhat/jenkins.repo
        dest: /etc/yum.repos.d/

   - name: add the repository keys
     rpm_key: 
        key: https://jenkins-ci.org/redhat/jenkins-ci.org.key
        state: present

   - name: install jenkins
     yum:
        name: "{{item}}"
        state: present
     with_items:
        - jenkins
        - git

   - name: Add user Public Key
     copy:
       src: "/root/glp-task/jenkins-master-ami/files/id_rsa.pub"
       dest: "/root/.ssh/id_rsa.pub"
       mode: 0644

   - name: Add user Private Key
     copy:
       src: "/root/glp-task/jenkins-master-ami/files/id_rsa"
       dest: "/root/.ssh/id_rsa"
       mode: 0600

   - git:
       repo: ssh://git@bitbucket.pearson.com/glpin/glp-db-automation.git
       dest: /root/amit-git

